<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>乐淘商城首页</title>
    <link rel="stylesheet" href="lib/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="lib/bootstrap-validator/css/bootstrapValidator.css">
    <link rel="stylesheet" href="lib/nprogress/nprogress.css">
    <link rel="stylesheet" href="css/common.css">
    <style>
        .lt-content table th,
        .lt-content table.table-bordered tbody td{
            text-align: center;
        vertical-align: middle;
        }

    </style>
</head>
<body>

<!--1. 左边侧边栏-->
<div class="lt-aside">
    <!--标题-->
    <div class="brand">
        <a href="#">黑马程序员</a>
    </div>
    <!--用户-->
    <div class="user">
        <img src="images/1.jpg" alt="">
        <P> 超级管理员</P>
    </div>
    <!--导航-->
    <div class="nav">
        <ul>
            <li><a href="user.html" class="current"><i class="glyphicon glyphicon-user"></i><span>用户管理</span></a>
            </li>
            <li>
                <a href="javascript:void(0)" class="category"><i
                        class="glyphicon glyphicon-list "></i><span>分类管理</span></a>
                <div class="child" style="display:none">
                    <a href="one.html" >一级分类</a>
                    <a href="two.html">二级分类</a>
                </div>
            </li>
            <li><a href="product.html"><i class="glyphicon glyphicon-tags"></i><span>商品管理</span></a>
            </li>
        </ul>
    </div>

</div>


<!--2. 右侧主体部分-->
<div class="lt-main">
    <!-- 头部-->
    <div class="topbar">
        <a href="#" class="pull-left icon_menu"><i
                class="glyphicon glyphicon-align-justify"></i></a>
        <a href="#" class="pull-right icon_logout" id="logoutBtn"><i
                class="glyphicon glyphicon-log-out"></i></a>

    </div>

    <!--内容-->
    <div class="container-fluid mt_20">
        <!--路径导航-->
        <ol class="breadcrumb">
            <li><a href="index.html">管理系统</a></li>
            <li><a href="#">用户管理</a></li>
        </ol>

        <div class="lt-content">
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>序号</th>
                    <th>用户名</th>
                    <th>手机号</th>
                    <th>状态</th>
                    <th>操作</th>
                </tr>
                </thead>
                <tbody>
<!--                <tr>-->
<!--                    <td>1</td>-->
<!--                    <td>will</td>-->
<!--                    <td>13510783541</td>-->
<!--                    <td>正常</td>-->
<!--                    <td><button class="btn btn-danger">禁用</button></td>-->
<!--                </tr>-->
                </tbody>
                
            </table>
        </div>


<!--bootstrao-paginator3插件必须使用ul元素-->
        <div class="text-right">
        <ul class="paginator" ></ul>

        </div>

    </div>


</div>


<!--3. 模态框-->
<!--蒙层-->
<div class="modal fade" tabindex="-1" id="logoutModal">

    <div class="modal-dialog modal-sm">
        <!--内容-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">温馨提示</h4>
            </div>
            <div class="modal-body">
                <p style="color:#A94442"><i class="glyphicon glyphicon-info-sign"></i>您确定要退出后台管理系统吗?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="logout">确定</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--模板引擎-->
<script type="text/html" id="tpl">
    {{each rows v i}}
    <tr>
        <td>{{i+1+(page-1)*size}}</td>
        <td>{{v.username}}</td>
        <td>{{v.mobile}}</td>
        <td>
            {{v.isDelete === 1?"正常" : "禁用"}}
        </td>
        <td>
            {{if v.isDelete ===1}}
            <button class="btn btn-danger">禁用</button>
            {{/if}}

            {{if v.isDelete ===0}}
            <button class="btn btn-success">启用</button>
            {{/if}}
        </td>
    </tr>
    {{/each}}

</script>

<script src="lib/jquery/jquery.min.js"></script>
<script src="lib/bootstrap/js/bootstrap.js"></script>
<script src="lib/bootstrap-validator/js/bootstrapValidator.min.js"></script>
<script src="lib/nprogress/nprogress.js"></script>
<script src="lib/artTemplate/template-web.js"></script>
<script src="lib/bootstrap-paginator/bootstrap-paginator.js"></script>
<script src="js/common.js"></script>

<script>
    $(function () {

         var currentPage=1;
         var pageSize=5;
         render();//一进页面首先渲染一次
         function render(){
             //发送ajax请求获取后台数据
             $.ajax({
                 type:"get",
                 url:"/user/queryUser",
                 data:{
                     page:currentPage,
                     pageSize:pageSize
                 },
                 dataType:"json",
                 success:function (info) {
                     console.log(info)
                     var htmlStr=template("tpl",info);
                     $("tbody").html(htmlStr);



                     // 分页插件
                     $(".paginator").bootstrapPaginator({
                         bootstrapMajorVersion:3,
                         totalPages:Math.ceil(info.total/info.size),
                         currentPage:info.page,
                        //分页渲染
                        onPageClicked:function (a,b,c,page) {
                            console.log(page);
                            currentPage=page;
                            render();
                        }
                     })
                 }

             })
         }




    })
</script>
</body>
</html>